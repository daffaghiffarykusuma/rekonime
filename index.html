<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; base-uri 'self'; object-src 'none'; frame-ancestors 'self'; script-src 'self' 'nonce-rekonime-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' https: data:; connect-src 'self' https://api.jikan.moe; frame-src https://www.youtube.com https://www.youtube-nocookie.com">
  <meta name="csp-nonce" content="rekonime-inline">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rekonime - Find Anime You'll Actually Finish</title>
  <meta name="description"
    content="Discover anime worth your time. Rekonime uses Retention and Satisfaction scores to find shows that stay engaging from start to finish.">
  <meta name="theme-color" content="#FFB7C5">
  <link rel="canonical" href="">
  <meta property="og:site_name" content="Rekonime">
  <meta property="og:title" content="Rekonime - Find Anime You'll Actually Finish">
  <meta property="og:description"
    content="Discover anime worth your time with two numbers you can trust: Retention Score for watch-through consistency, plus Satisfaction Score from MAL.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="">
  <meta property="og:image" content="favicon.svg">
  <meta property="og:image:alt" content="Rekonime logo">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Rekonime - Find Anime You'll Actually Finish">
  <meta name="twitter:description"
    content="Discover anime worth your time with Retention and Satisfaction scores that help you find shows that stay engaging.">
  <meta name="twitter:image" content="favicon.svg">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">

  <!-- Google Fonts - Sakura Theme (Noto Serif JP, Noto Sans JP, Playfair Display, DM Sans) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/themes.css">
</head>

<body>
  <div class="app-container" id="app-container">
    <header class="header">
      <a class="logo logo-link" href="index.html" data-home-link data-action="home-shortcut"
        aria-label="Rekonime home (clears filters)">
        <div class="logo-icon" aria-hidden="true">R</div>
        <div class="logo-text">
          <span class="logo-title">Rekonime</span>
          <span class="logo-tagline">Anime worth your time</span>
        </div>
      </a>
      <div class="header-controls">
        <div class="header-search-wrapper">
          <input type="text" id="header-search" class="header-search-input" placeholder="Search anime..."
            aria-label="Search anime" aria-autocomplete="list" aria-expanded="false"
            aria-controls="header-search-dropdown" role="combobox" autocomplete="off">
          <div class="header-search-dropdown" id="header-search-dropdown" role="listbox" aria-label="Search results">
            <!-- Search results populated by JS -->
          </div>
        </div>
        <button class="btn btn-sm btn-primary surprise-btn" id="surprise-toggle" type="button"
          aria-label="Surprise me with a random anime" title="Surprise Me">
          <span class="surprise-icon" aria-hidden="true">ðŸŽ²</span>
          <span class="surprise-label">Surprise Me</span>
        </button>
        <div class="header-sort">
          <label class="sort-label" for="sort-select">Sort</label>
          <div class="select-wrapper sort-select-wrapper">
            <select id="sort-select" class="sort-select" aria-label="Sort anime"></select>
          </div>
        </div>
        <div class="header-actions">
          <button class="btn btn-sm btn-outline help-btn" id="help-toggle" type="button" aria-label="Open help and tour"
            title="Help & Tour">
            <span class="help-icon" aria-hidden="true">?</span>
            <span class="help-label">Help</span>
          </button>
          <button class="btn btn-sm btn-outline filter-btn" id="filter-toggle" type="button">Filters</button>
          <a class="btn btn-sm btn-outline bookmarks-link" href="bookmarks.html" aria-label="View bookmarks">Bookmarks
            &#9733;</a>
          <button class="btn btn-sm btn-outline settings-btn" id="settings-toggle" type="button"
            aria-label="Open settings" title="Settings">
            <span class="settings-icon" aria-hidden="true">&#9881;</span>
            <span class="settings-label">Settings</span>
          </button>
        </div>
      </div>
    </header>

    <div class="active-filters" id="active-filters">
      <div class="active-filters-content">
        <span class="active-filters-label" id="active-filters-label">Active filters</span>
        <div class="active-filters-list" id="active-filters-list"></div>
      </div>
      <button class="btn btn-sm btn-outline active-filters-clear" id="active-filters-clear" type="button">Clear
        filters</button>
    </div>

    <div class="discovery-garden" id="discovery-garden">
      <div class="petal-scatter" aria-hidden="true">
        <span class="floating-petal petal-1">ðŸŒ¸</span>
        <span class="floating-petal petal-2">ðŸŒ¸</span>
        <span class="floating-petal petal-3">ðŸŒ¸</span>
        <span class="floating-petal petal-4">ðŸŒ¸</span>
        <span class="floating-petal petal-5">ðŸŒ¸</span>
      </div>
      <div class="discovery-garden-content">
        <h3 class="discovery-title">Discover Your Next Journey</h3>
        <p class="discovery-subtitle">
          Like cherry blossoms, great anime moments are fleeting but unforgettable.
          Let us help you find your next favorite story.
        </p>
        <div class="discovery-tips">
          <div class="tip-card">
            <span class="tip-icon">ðŸ“Š</span>
            <h4>Two Numbers Matter</h4>
            <p>Retention = consistency. Satisfaction = quality.</p>
            <button class="tip-cta" data-action="learn-scores">Learn more</button>
          </div>
          <div class="tip-card">
            <span class="tip-icon">ðŸŽ­</span>
            <h4>Filter by Mood</h4>
            <p>Use Genre and Theme chips to find your vibe.</p>
            <button class="tip-cta" data-action="scroll-to-filters">Try filters</button>
          </div>
        </div>
      </div>
    </div>

    <div class="quick-filters" id="quick-filters">
      <div class="quick-filters-tabs" role="tablist" aria-label="Quick filters">
        <button class="quick-tab is-active" type="button" data-action="quick-tab" data-tab="genres" aria-selected="true"
          aria-controls="genre-chips">Genre</button>
        <button class="quick-tab" type="button" data-action="quick-tab" data-tab="themes" aria-selected="false"
          aria-controls="theme-chips">Theme</button>
      </div>
      <div class="quick-filters-panel">
        <div class="quick-filters-track is-active" id="genre-chips" data-filter-group="genres" data-label="Genre">
          <!-- Populated by JS -->
        </div>
        <div class="quick-filters-track" id="theme-chips" data-filter-group="themes" data-label="Theme">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>

    <div class="seasonal-filters" id="seasonal-filters">
      <div class="seasonal-filters-label">Seasonal:</div>
      <div class="seasonal-chips" id="seasonal-chips">
        <!-- Populated by JS -->
      </div>
    </div>

    <section class="recommendations-section" id="recommendations-section">
      <div class="recommendations-header">
        <div>
          <h2>Recommended for you</h2>
          <p class="section-subtitle" id="recommendations-context">
            Top picks with high Retention Scores (you'll finish them) and solid MAL Satisfaction (they're actually
            good).
          </p>
        </div>
        <button class="help-link" data-action="explain-recommendations" aria-label="How we pick recommendations">
          <span>How we pick these</span>
        </button>
      </div>
      <div class="recommendation-modes" id="recommendation-modes">
        <span class="modes-label">Discover by:</span>
        <div class="mode-chips" id="mode-chips">
          <!-- Populated by JS -->
        </div>
      </div>
      <div class="recommendations-grid" id="recommendations-grid">
        <div class="skeleton-card skeleton-recommendation"></div>
        <div class="skeleton-card skeleton-recommendation"></div>
        <div class="skeleton-card skeleton-recommendation"></div>
        <div class="skeleton-card skeleton-recommendation"></div>
        <div class="skeleton-card skeleton-recommendation"></div>
        <div class="skeleton-card skeleton-recommendation"></div>
      </div>
    </section>

    <section class="because-you-watched-section" id="because-you-watched-section" style="display: none;">
      <div class="byw-header">
        <h2>Because You Watched</h2>
        <div class="byw-seed" id="byw-seed">
          <!-- Populated by JS -->
        </div>
      </div>
      <div class="byw-grid" id="byw-grid">
        <!-- Populated by JS -->
      </div>
    </section>

    <section class="trending-section" id="trending-section">
      <div class="trending-header">
        <div class="trending-title-group">
          <h2>ðŸ”¥ Trending Now</h2>
          <span class="trending-live-indicator">
            <span class="live-dot"></span>
            Live
          </span>
        </div>
        <p class="section-subtitle">What's getting attention this week</p>
      </div>
      <div class="trending-grid" id="trending-grid">
        <!-- Populated by JS -->
      </div>
    </section>

    <section class="rankings-section" id="rankings-section">
      <div class="ranking-card" id="ranking-card-1">
        <h3 id="ranking-title-1">Top Retention</h3>
        <div id="best-ranking-1">
          <div class="skeleton-card skeleton-ranking"></div>
        </div>
      </div>
      <div class="ranking-card" id="ranking-card-2">
        <h3 id="ranking-title-2">Highest Satisfaction (MAL)</h3>
        <div id="best-ranking-2">
          <div class="skeleton-card skeleton-ranking"></div>
        </div>
      </div>
    </section>

    <section class="grid-section" id="catalog-section">
      <div class="section-header">
        <div>
          <h2>Browse the catalog</h2>
          <p class="section-subtitle">Explore all titles, sorted by what matters to you.</p>
        </div>
      </div>
      <div class="anime-grid" id="anime-grid">
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
        <div class="skeleton-card skeleton-grid"></div>
      </div>
    </section>
  </div>

  <button class="filter-fab" id="filter-fab" type="button" data-action="scroll-to-filters" aria-label="Jump to filters">
    Filters â†‘
  </button>

  <div class="modal-overlay filter-modal-overlay" id="filter-modal" aria-hidden="true">
    <div class="modal-content filter-modal-content" role="dialog" aria-modal="true" aria-labelledby="filter-modal-title"
      tabindex="-1">
      <div class="filter-modal-header">
        <div>
          <h2 class="filter-modal-title" id="filter-modal-title">Find your next watch</h2>
          <p class="filter-modal-subtitle">Mix and match to narrow down what you're in the mood for.</p>
        </div>
        <button class="modal-close" id="close-filter-modal" type="button" aria-label="Close filters">&times;</button>
      </div>
      <div class="filter-modal-body">
        <div class="filter-sections" id="filter-sections">
          <!-- Populated by JS -->
        </div>
        <div class="filter-modal-actions">
          <button class="btn btn-clear" id="clear-filters" type="button">Clear All</button>
          <button class="btn btn-primary" id="apply-filters" type="button">Apply Filters</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay settings-modal-overlay" id="settings-modal" aria-hidden="true">
    <div class="modal-content settings-modal-content" role="dialog" aria-modal="true"
      aria-labelledby="settings-modal-title" tabindex="-1">
      <button class="modal-close" id="close-settings" type="button" aria-label="Close settings">&times;</button>
      <div class="settings-modal-body">
        <div class="settings-modal-header">
          <h2 class="settings-modal-title" id="settings-modal-title">Settings</h2>
          <p class="settings-modal-subtitle">Adjust playback and data usage.</p>
        </div>
        <div id="settings-content"></div>
      </div>
    </div>
  </div>


  <!-- Detail Modal -->
  <div class="modal-overlay" id="detail-modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="detail-modal-title" tabindex="-1">
      <button class="modal-close" id="close-detail" type="button" aria-label="Close details">&times;</button>
      <div class="modal-body" id="detail-content">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Metric Help Modal -->
  <div class="modal-overlay metric-help-overlay" id="metric-help-modal" aria-hidden="true">
    <div class="modal-content metric-help-content" role="dialog" aria-modal="true" aria-labelledby="metric-help-title">
      <button class="modal-close" id="close-metric-help" type="button" aria-label="Close help">&times;</button>
      <div class="metric-help-body" id="metric-help-body">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Offline Indicator -->
  <div class="offline-indicator" id="offline-indicator" role="status" aria-live="polite" aria-hidden="true">
    <span class="offline-icon" aria-hidden="true">ðŸ“¡</span>
    <span class="offline-text">You're offline. Some features may be limited.</span>
  </div>

  <!-- Update Notification -->
  <div class="update-notification" id="update-notification" role="alert" aria-live="polite" aria-hidden="true">
    <span class="update-icon" aria-hidden="true">âœ¨</span>
    <span class="update-text">Update available! Refresh to get the latest version.</span>
    <button class="update-btn" id="update-btn" type="button">Update Now</button>
    <button class="update-dismiss" id="update-dismiss" type="button"
      aria-label="Dismiss update notification">&times;</button>
  </div>

  <!-- Scripts -->
  <script src="js/stats.js" defer></script>
  <script src="js/recommendations.js" defer></script>
  <script src="js/discovery.js" defer></script>
  <script src="js/reviews.js" defer></script>
  <script src="js/metricGlossary.js" defer></script>
  <script src="js/filterPresets.js" defer></script>
  <script src="js/onboarding.js" defer></script>
  <script src="js/themeManager.js" defer></script>
  <script src="js/keyboardShortcuts.js" defer></script>
  <script src="js/serviceWorker.js" defer></script>
  <script src="js/app.js" defer></script>
</body>

</html>